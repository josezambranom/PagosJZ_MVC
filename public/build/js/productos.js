!function(){let e=[],o=[];!async function(){try{const c="/plataforma/productos",r=await fetch(c),i=await r.json();if(e=i.sort(((e,o)=>e.plataforma.toLowerCase()<o.plataforma.toLowerCase()?-1:e.plataforma.toLowerCase()>o.plataforma.toLowerCase()?1:0)),o=e,n(),t&&t.length>1){const e=new URLSearchParams(t);a(e.get("id"))}}catch(e){console.log(e)}}();document.querySelector("#buscar").addEventListener("input",(function(t){const a=t.target.value.toLowerCase();o=""!==a?e.filter((e=>e.plataforma.toLowerCase().includes(a))):[];n()}));const t=window.location.search;function n(){const t={streaming:0,videojuegos:0,recargas:0},n=document.querySelector("#num_streaming"),c=document.querySelector("#num_video"),r=document.querySelector("#num_recarga"),i=document.querySelector(".streaming_contenido"),l=document.querySelector(".videojuegos_contenido"),s=document.querySelector(".recargas_contenido");i.innerHTML="",l.innerHTML="",s.innerHTML="";const d={1:{name:"streaming",container:i,counter:n},2:{name:"videojuegos",container:l,counter:c},3:{name:"recargas",container:s,counter:r}};(o.length?o:e).forEach((e=>{const o=d[e.categoria];if(!o)return void console.error("Categoría no reconocida:",e.categoria);const n=document.createElement("div");n.classList.add("producto");const c=document.createElement("img");c.src=`/imagenes/${o.name}/${e.imagen}`,c.classList.add("producto__imagen"),c.loading="lazy",c.alt=e.plataforma;const r=document.createElement("p");r.textContent=e.plataforma,r.classList.add("producto__nombre");const i=document.createElement("p");i.textContent=`$ ${e.precio}`,i.classList.add("producto__precio");const l=document.createElement("BUTTON");l.classList.add("boton"),l.textContent="Comprar",l.onclick=function(){console.log(e.id),a(e.id)},n.appendChild(c),n.appendChild(r),n.appendChild(i),n.appendChild(l),o.container.appendChild(n),t[o.name]++})),n.textContent=t.streaming,c.textContent=t.videojuegos,r.textContent=t.recargas}function a(o){const t=e.filter((e=>e.id===o))[0];"/productos"===window.location.pathname?Swal.fire({title:"¡Atención!",text:"Para continuar con su proceso de compra usted deberá seleccionar si desea hacerlo desde nuestra plataforma o mediante WhatsApp",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#269200",confirmButtonText:"Comprar en plataforma",cancelButtonText:"Comprar por WhatsApp",allowOutsideClick:!1}).then((e=>{e.isConfirmed?Swal.fire({title:"¡Atención!",text:"A continuación deberá iniciar sesión para continuar con su compra",icon:"info",cancelButtonColor:"#d33",confirmButtonText:"Ir a inicio de sesión",showCancelButton:!0,cancelButtonText:"Cancelar",allowOutsideClick:!1}).then((e=>{e.isConfirmed&&(window.location.href=`/login?id=${o}`)})):Swal.fire({title:"¡Atención!",text:"A continuación será redireccionado a a WhatsApp para continuar con su compra",icon:"info",confirmButtonColor:"#269200",cancelButtonColor:"#d33",confirmButtonText:"Ir a WhatsApp",showCancelButton:!0,cancelButtonText:"Cancelar",allowOutsideClick:!1}).then((e=>{if(e.isConfirmed){const e=`https://wa.me/${"593963177642"}?text=${encodeURIComponent(`¡Hola! 👋🏼😄 \n\nEstoy comprando desde la tienda online, deseo adquirir *${t.plataforma}*.\n\n*Nota:* El valor de mi compra es de *$ ${t.precio}*`)}`;window.open(e)}}))})):Swal.fire({title:"Confirmación de compra",text:`Usted va a adquirir ${t.plataforma} por el valor de $ ${t.precio}`,icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",allowOutsideClick:!1}).then((e=>{e.isConfirmed&&(0>t.precio?Swal.fire({title:"Compra realizada",text:"Su compra se ha realizado con éxito",icon:"success",cancelButtonColor:"#d33",confirmButtonText:"Ir a mis cuentas",showCancelButton:!0,cancelButtonText:"Cancelar",allowOutsideClick:!1}).then((e=>{e.isConfirmed&&(window.location.href="/dashboard/cuentas")})):Swal.fire({title:"¡Oh no!",text:"Su saldo es insuficiente",icon:"error",cancelButtonColor:"#d33",confirmButtonText:"Cargar Saldo",showCancelButton:!0,cancelButtonText:"Cancelar",allowOutsideClick:!1}).then((e=>{e.isConfirmed&&(window.location.href="/dashboard/acreditaciones")})))}))}}(),document.addEventListener("DOMContentLoaded",(()=>{[{id:"#streaming",target:".streaming"},{id:"#videojuegos",target:".videojuegos"},{id:"#recargas",target:".recargas"}].forEach((({id:e,target:o})=>{document.querySelector(e).addEventListener("click",(()=>function(e){const o=document.querySelector(e),t=document.querySelector(".principal");if(o){const e={top:o.offsetTop,behavior:"smooth"};t?t.scrollTo(e):o.scrollIntoView(e)}}(o)))}))}));