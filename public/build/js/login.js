!function(){document.querySelector("#formlogin").addEventListener("submit",(function(n){n.preventDefault();const r=document.querySelector("#email_login"),t=document.querySelector("#clave_login"),i=r.value.trim(),a=t.value.trim();if(!i||!a)return e("warning","¡Importante!","Todos los campos son obligatorios"),r.value="",void(t.value="");r.value="",t.value="",async function(n,r){const t=new FormData;t.append("email",n),t.append("clave",r);try{const n="/usuario/login",r=await fetch(n,{method:"POST",body:t}),i=await r.json();if(console.log(i),i.error)return void e("error","¡Oh no!",i.error);"0"===i.tipousuario?o&&o.length>1?window.location.href=`/dashboard/productos${o}`:window.location.href="/dashboard":window.location.href="/admin"}catch(o){console.log(o),e("error","¡Oh no!","Se ha producido un error interno, comuniquese con el administrador.")}}(i,a)}));const o=window.location.search??!1;function e(o,e,n){Swal.fire({icon:o,title:e,text:n,allowOutsideClick:!1})}}();