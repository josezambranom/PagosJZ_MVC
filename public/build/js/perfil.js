!function(){const e=document.querySelector("#nombre_perfil"),o=document.querySelector("#apellido_perfil"),t=document.querySelector("#telefono_perfil"),a=document.querySelector("#genero_perfil"),r=document.querySelector("#clave_actual"),n=document.querySelector("#clave_nueva");e&&async function(){try{const r="/perfil",n=await fetch(r),c=await n.json();e.value=c.nombre,o.value=c.apellido,t.value=c.telefono,a.value=c.genero}catch(e){console.log(e)}}();const c=document.querySelector("#form_perfil");c&&c.addEventListener("submit",(async function(r){r.preventDefault();const n=e.value.trim(),c=o.value.trim(),l=t.value.trim(),i=a.value.trim();if(function(){const r=e.value.trim(),n=o.value.trim(),c=t.value.trim(),l=a.value.trim();if(!r||!n||!c||""===l)return void u("warning","¡Importante!","Todos los campos son obligatorios");if(t.length<10)return void u("error","¡Oh no!","El teléfono debe contener al menos 10 carácteres");return!0}()){const e=new FormData;e.append("nombre",n),e.append("apellido",c),e.append("telefono",l),e.append("genero",i);try{const o="/perfil",t=await fetch(o,{method:"POST",body:e});(await t.json()).respuesta&&u("success","Actualizado con éxito","Sus datos se actualizaron correctamente")}catch(e){console.log(e),u("error","¡Oh no!","Se ha producido un error interno, comuniquese con el administrador.")}}}));const l=document.querySelector("#form_clave");function u(e,o,t){Swal.fire({icon:e,title:o,text:t,allowOutsideClick:!1})}l&&l.addEventListener("submit",(async function(e){e.preventDefault();const o=r.value.trim(),t=n.value.trim();if(function(){const e=r.value.trim(),o=n.value.trim();if(!e)return u("warning","¡Importante!","La clave actual es obligatoria"),r.value="",void(n.value="");if(!o)return u("warning","¡Importante!","La clave nueva es obligatoria"),n.value="",void(r.value="");if(o.length<6)return u("error","¡Oh no!","La clave nueva debe contener al menos 6 carácteres"),n.value="",void(r.value="");return!0}()){const e=new FormData;e.append("clave_actual",o),e.append("clave_nueva",t);try{const o="/cambiar-clave",t=await fetch(o,{method:"POST",body:e}),a=await t.json();console.log(a),a.respuesta?(u("success","Actualizado con éxito","Su clave se actualizó correctamente"),r.value="",n.value=""):u("error","¡Oh no!",a.error)}catch(e){console.log(e),u("error","¡Oh no!","Se ha producido un error interno, comuniquese con el administrador."),r.value="",n.value=""}}}))}();